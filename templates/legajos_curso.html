{% extends "base.html" %}
{% block content %}

{% if request.args.get('ok') %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
  Legajo actualizado correctamente.
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
</div>
{% endif %}

<h2>Legajos - {{ curso }}</h2>
<div class="d-flex gap-2 mb-3 flex-wrap">
      <a class="btn btn-outline-secondary" href="{{ url_for('legajos_cursos') }}">Volver a Legajos-Cursos</a>
      
    </div>
<table class="table table-sm table-bordered align-middle">
  <thead>
    <tr>
      <th>Alumno</th>
      {% for code, label in campos %}
      <th>{{ label }}</th>
      {% endfor %}
      <th>Guardar</th>
    </tr>
  </thead>
  <tbody>
    {% for a in alumnos %}
    <tr>
      <form method="post" action="{{ url_for('legajo_actualizar', id=a._id) }}">
        <td>{{ a.apellido }}, {{ a.nombre }}</td>
        {% set leg = a.legajo or {} %}
        {% for code, label in campos %}
        <td class="text-center">
          <input type="checkbox" name="{{ code }}" value="1"
                 {% if leg.get(code) %}checked{% endif %}>
        </td>
        {% endfor %}
        <td>
          <button class="btn btn-sm btn-primary" type="submit">OK</button>
        </td>
      </form>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% if not alumnos %}
<p class="text-muted">No hay alumnos en este curso.</p>
{% endif %}
{% endblock %}
